# 工作流名称，会显示在 GitHub Actions 面板中
name: Build Java 17 Maven Project

# 触发条件配置
on:
  # 当有代码推送到 main 分支（可根据你的主分支名修改，如 master）时自动触发
  push:
    branches: [ main ]
  # 当有 PR 提交到 main 分支时触发（可选，根据需要保留/删除）
  pull_request:
    branches: [ main ]
  # 配置手动触发（workflow_dispatch）
  workflow_dispatch:

# 工作流任务定义
jobs:
  build:
    # 运行的操作系统环境（选择 Ubuntu 最新版即可）
    runs-on: ubuntu-latest

    steps:
      # 步骤1：拉取代码到 Runner 环境
      - name: Checkout code
        uses: actions/checkout@v4

      # 步骤2：配置 Java 17 环境
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          # 指定 Java 版本
          java-version: '17'
          # 使用 Temurin 发行版（Eclipse 维护的开源 JDK，兼容性好）
          distribution: 'temurin'
          # 缓存 Maven 依赖，加速后续构建
          cache: 'maven'

      # 步骤3：执行 Maven 构建（clean 清理旧产物，package 打包）
      - name: Build with Maven
        run: mvn -B clean package --file pom.xml
        # -B：批处理模式，减少交互；--file 指定 pom 文件路径（默认根目录可省略）
